<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<title>1gcommander test</title>
		
	</head>
	<body style="margin:0px">
		<table width="100%" height="100%" cellpadding="0" cellspacing="0">
			<tr>
				<td valign="middle" align="center">
					<div id="controller_1g1g" style="width:220px;height:16px;padding:4px;cursor:pointer;background-color:#5a82b5"  onclick ="javascript:onControllerClick();">
						<div id="playPauseBtn_1g1g" style="width:16px;height:16px;background-image:url('image/asset.png');float:left;cursor:pointer;background-position:0px 0px;overflow:hidden" onmouseover="javascript:onPlayPauseBtnMouseOver();" onmouseout="javascript:onPlayPauseBtnMouseOut();" onclick ="javascript:onPlayPauseBtnClick();"></div>
						<div id="nextBtn_1g1g" style="width:16px;height:16px;background-image:url('image/asset.png');background-position:0px -64px;float:left;margin-left:4px;;cursor:pointer;overflow:hidden" onclick ="javascript:onNextBtnClick();" onmouseover="this.style.backgroundPosition='0px -80px';" onmouseout="this.style.backgroundPosition = '0px -64px'"></div>
						<div id="displayText_1g1g" style="width:172px; height:16px; font-size:12px; color: #ffffff; margin-left:8px;text-align:left;overflow:hidden;float:left;line-height:16px">开始听歌</div>
						
					</div>
				</td>
			</tr>		
		</table>
		<div style="width:0;height:0;">
			<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="100%" height="100%" id="commander1g1g">
				<param name="bgcolor" value="#333333" />
				<param name="movie" value="commander.swf"/>
				<param name="menu" value="false" />
				<param name="allowScriptAccess" value ="always" />
				<EMBED src="commander.swf" allowScriptAccess="always" menu="false" quality="high" bgcolor="#FFFFFF" width="100%" height="100%" name="commander1g1g"  type="application/x-shockwave-flash" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer" />
			</object>						
		</div>		
		<script type="text/javascript">			
			
			
			function get1gCommander()
			{
				if (navigator.appName.indexOf("Microsoft") != -1) {
					return window["commander1g1g"];
				} else {
					return document["commander1g1g"];
				}
			}
			var playPauseBtn_1g1g = document.getElementById("playPauseBtn_1g1g");
			var nextBtn_1g1g = document.getElementById("nextBtn_1g1g");
			var displayText_1g1g = document.getElementById("displayText_1g1g");
			var controller_1g1g = document.getElementById("controller_1g1g");
			var commander_1g1g = get1gCommander();
			var defaultDisplayText = "开始听歌";
			var playerState = "stop";
			var playerUrl = " http://www.1g1g.com/ourgame.com.index.html?sourcesite=ourgame&og_appid=4&og_ts=1249959766&og_uid=51&og_sig=44902249490bb0a0fd4661deb890f4fa&notice=%25E6%25AC%25A2%25E8%25BF%258E%25E8%25BF%259B%25E5%2585%25A5%25E5%25AE%25B6%25E5%259B%25AD%25E9%259F%25B3%25E4%25B9%2590"
			controllerReset();
			
			
			function controllerReset()
			{
				displayText_1g1g.innerHTML = defaultDisplayText;
				playPauseBtn_1g1g.style.backgroundPosition = "0px 0px";
				controller_1g1g.style.cursor = "pointer";
				playerState = "stop";		
			}
			function onControllerClick()
			{
				if(!commander_1g1g.command("is1g1gPlayerOpen"))
				{
					open1g1gPlayer();
				}
			
			}
			
			
			function playerEventDispatcher(type, body) 
			{
				
				if(type == "connect")
				{					
					commander_1g1g.command("getStatus", "playerState");
					commander_1g1g.command("getStatus", "display");
					controller_1g1g.style.cursor = "default";
				}
				else if(type == "display")
				{
					displayText_1g1g.innerHTML = body.text;
				}
				else if(type == "playerState")
				{	
					playerState = body.state;
					if (playerState == "stop" || playerState == "paused") 
					{
						playPauseBtn_1g1g.style.backgroundPosition = "0px 0px";
						commander_1g1g.command("getStatus", "currentSongInfo");
					}
					else
					{
						playPauseBtn_1g1g.style.backgroundPosition = "0px -32px";
					}
				}
				else if(type == "disconnect")
				{
					controllerReset();
				}
			} 
			function open1g1gPlayer()
			{
				window.open (playerUrl,'newwindow','height=480,width=270, toolbar=no,menubar=no,scrollbars=no,resizable=yes,location=no,status=no') 
			}
			
			function onPlayPauseBtnClick()
			{
				if(commander_1g1g.command("is1g1gPlayerOpen"))
				{
					commander_1g1g.command("playPause");
				}
				else
				{
					open1g1gPlayer();
				}
			}
			function onPlayPauseBtnMouseOver()
			{
				if (playerState == "stop" || playerState == "paused") 
				{
					playPauseBtn_1g1g.style.backgroundPosition = "0 -16px"; 
				}
				else
				{
					playPauseBtn_1g1g.style.backgroundPosition = "0 -48px"
				}
				
			}
			function onPlayPauseBtnMouseOut()
			{
				if (playerState == "stop" || playerState == "paused") 
				{
					playPauseBtn_1g1g.style.backgroundPosition = "0px 0px"
				}
				else
				{
					playPauseBtn_1g1g.style.backgroundPosition = "0px -32px"
				}
			}
			function onNextBtnClick()
			{
				if(commander_1g1g.command("is1g1gPlayerOpen"))
				{
					commander_1g1g.command("next");
				}
				else
				{
					open1g1gPlayer();
				}
			}
		</script>		
	</body>
</html>