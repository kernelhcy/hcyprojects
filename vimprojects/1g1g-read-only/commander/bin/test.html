<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<title>1gcommander test</title>
		<style type="text/css">
			a {
				text-decoration:underline;
				cursor:pointer;
			}
		</style>
	</head>
	<body>
		<script type="text/javascript">
			function get1gCommander(){
				if (navigator.appName.indexOf("Microsoft") != -1) {
					return window["1gCommander"];
				} else {
					return document["1gCommander"];
				}
			}
			var maxOutputLength = 10000;
			function playerEventDispatcher(type, body) {
				var output = document.getElementById("output");
				var words = "type: " + type + ", body: " + body.toJSON();
				var newValue = words + '\n' + output.value;
				output.value = (newValue.length > maxOutputLength) ? newValue.substring(0, maxOutputLength) : newValue;
			}
			Object.prototype.toJSON = function(){  
				var json = [];  
				for(var i in this){  
					if(!this.hasOwnProperty(i)) continue;  
					json.push(  
						i.toJSON() + " : " +  
						((this[i] != null) ? this[i].toJSON() : "null")  
					)  
				}  
				return "{" + json.join(", ") + "}";  
			}  
			Array.prototype.toJSON = function(){  
				for(var i=0,json=[];i<this.length;i++)  
					json[i] = (this[i] != null) ? this[i].toJSON() : "null";  
				return "["+json.join(", ")+"]"  
			}  
			String.prototype.toJSON = function(){  
				return '"' +  
					this.replace(/(\\|\")/g,"\\$1")  
					.replace(/\n|\r|\t/g,function(){  
						var a = arguments[0];  
						return  (a == '\n') ? '\\n':  
								(a == '\r') ? '\\r':  
								(a == '\t') ? '\\t': ""  
					}) +  
					'"'  
			}  
			Boolean.prototype.toJSON = function(){return this}  
			Function.prototype.toJSON = function(){return this}  
			Number.prototype.toJSON = function(){return this}  
			RegExp.prototype.toJSON = function(){return this}  
		</script>

		<p><a onclick="javascript:get1gCommander().command('play','矜持-王菲');">♫ 矜持-王菲</a></p>
		<p><a onclick="javascript:get1gCommander().command('next');">下一首</a></p>
		<p><a onclick="javascript:get1gCommander().command('playPause');">播放/暂停</a></p>
		<p><a onclick="javascript:get1gCommander().command('volumeOnOff');">静音</a></p>
		<p><a onclick="javascript:alert('是否打开了亦歌播放器: ' + (get1gCommander().command('is1g1gPlayerOpen')));">是否打开了亦歌播放器</a></p>
		<p>			
		<textarea id="output" style="width:100%;height:300px" readonly="true" onKeyDown="if (event.keyCode == 13) this.value = 'Cleared. (Press enter to clear.)'">playerEventDispatcher() shows here. Press enter to clear.</textarea>
		</p>

		<div style="width:0;height:0;">
			<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="100%" height="100%" id="1gCommander">
				<param name="bgcolor" value="#333333" />
				<param name="movie" value="http://commander.1g1g.com/commander.swf"/>
				<param name="menu" value="false" />
				<param name="allowScriptAccess" value ="always" />
				<EMBED src="http://commander.1g1g.com/commander.swf" allowScriptAccess="always" menu="false" quality="high" bgcolor="#FFFFFF" width="100%" height="100%" name="1gCommander"  type="application/x-shockwave-flash" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer" />
			</object>
		</div>

	</body>
</html>